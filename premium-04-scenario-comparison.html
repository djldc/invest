<!DOCTYPE html> <html lang="en"> <head>
  <script src="/sitelock.js"></script> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Scenario Comparison ‚Äî Funds Edge</title> <link href="https://fonts.googleapis.com/css2?family=Cabinet+Grotesk:wght@400;500;700;800&family=Fira+Code:wght@300;400;500&display=swap" rel="stylesheet"> <style> *,*::before,*::after{box-sizing:border-box;margin:0;padding:0} :root{ --bg:#0a0e16;--surface:#0f1420;--card:#141b26;--card2:#19212f; --border:#1f2d42;--border2:#172036; --a:#4fd1c5;--a-d:rgba(79,209,197,.12);--a-dd:rgba(79,209,197,.06); --b:#f6ad55;--b-d:rgba(246,173,85,.12);--b-dd:rgba(246,173,85,.06); --c:#fc8181;--c-d:rgba(252,129,129,.12); --text:#e2e8f4;--muted:#4a5a72;--muted2:#2c3a4f; --green:#48bb78;--red:#fc8181; } html{scroll-behavior:smooth} body{background:var(--bg);color:var(--text);font-family:'Cabinet Grotesk',sans-serif;min-height:100vh;overflow-x:hidden} body::before{content:'';position:fixed;inset:0;background:radial-gradient(ellipse 50% 40% at 50% 0%,rgba(79,209,197,.04) 0%,transparent 60%);pointer-events:none} /* HEADER */ header{background:rgba(10,14,22,.9);backdrop-filter:blur(10px);border-bottom:1px solid var(--border2);padding:14px 32px;display:flex;align-items:center;gap:16px;position:sticky;top:0;z-index:20} .logo{font-weight:800;font-size:1.05rem;color:var(--text)}.logo span{color:var(--a)} .hd{width:1px;height:18px;background:var(--border)} .htitle{font-size:12px;font-weight:500;color:var(--muted);letter-spacing:.08em;text-transform:uppercase} /* HERO */ .hero{text-align:center;padding:60px 40px 40px;position:relative;z-index:1} .hero-chip{display:inline-flex;align-items:center;gap:6px;background:var(--a-dd);border:1px solid rgba(79,209,197,.2);border-radius:20px;padding:5px 14px;font-size:10px;letter-spacing:.2em;text-transform:uppercase;color:var(--a);margin-bottom:18px} .hero-title{font-size:clamp(2rem,4vw,3rem);font-weight:800;line-height:1.08;letter-spacing:-.03em;margin-bottom:12px} .hero-title span{color:var(--a)} .hero-desc{font-size:14px;color:var(--muted);line-height:1.7;max-width:500px;margin:0 auto 32px} /* TEMPLATE PICKER */ .templates{display:flex;justify-content:center;flex-wrap:wrap;gap:10px;max-width:900px;margin:0 auto 48px;padding:0 20px} .tpl{background:var(--card);border:1px solid var(--border);border-radius:8px;padding:12px 18px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:8px;font-size:12px;font-weight:500;color:var(--muted)} .tpl:hover{border-color:var(--a);color:var(--text);background:var(--a-dd)} .tpl.active{border-color:var(--a);color:var(--a);background:var(--a-d)} .tpl-icon{font-size:1.1rem} /* MAIN COMP */ .comp-wrap{max-width:1100px;margin:0 auto;padding:0 32px 80px;position:relative;z-index:1} /* SCENARIO COLUMNS */ .scenarios{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:28px} .scenario-col{background:var(--card);border:1px solid var(--border);border-radius:12px;overflow:hidden} .scenario-header{padding:16px 20px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:10px} .scenario-dot{width:10px;height:10px;border-radius:50%;flex-shrink:0} .s-a .scenario-dot{background:var(--a)} .s-b .scenario-dot{background:var(--b)} .scenario-label{font-size:9px;letter-spacing:.25em;text-transform:uppercase;color:var(--muted)} .scenario-name{font-size:13px;font-weight:700;color:var(--text)} .scenario-body{padding:20px} .field-group{margin-bottom:16px} .fl{font-size:9px;letter-spacing:.18em;text-transform:uppercase;color:var(--muted);margin-bottom:7px;display:block} .fi{width:100%;background:var(--card2);border:1px solid var(--border);border-radius:6px;padding:10px 12px;color:var(--text);font-family:'Fira Code',monospace;font-size:13px;outline:none;transition:border-color .2s;-webkit-appearance:none} .fi:focus{border-color:var(--a)} .s-b .fi:focus{border-color:var(--b)} .fi-wrap{position:relative}.pfx,.sfx{position:absolute;top:50%;transform:translateY(-50%);font-size:12px;color:var(--muted);pointer-events:none} .pfx{left:10px}.sfx{right:10px} .fi.hp{padding-left:24px}.fi.hs{padding-right:32px} input[type=range]{-webkit-appearance:none;width:100%;height:3px;background:linear-gradient(90deg,var(--a) var(--pct,50%),var(--border) var(--pct,50%));border-radius:2px;cursor:pointer;outline:none} input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:16px;height:16px;border-radius:50%;background:var(--a);border:2px solid var(--bg);box-shadow:0 0 6px rgba(79,209,197,.4)} .s-b input[type=range]{background:linear-gradient(90deg,var(--b) var(--pct,50%),var(--border) var(--pct,50%))} .s-b input[type=range]::-webkit-slider-thumb{background:var(--b);box-shadow:0 0 6px rgba(246,173,85,.4)} .range-row{display:flex;align-items:center;gap:10px} .range-display{font-family:'Fira Code',monospace;font-size:12px;color:var(--a);min-width:68px;text-align:right;background:var(--a-dd);padding:4px 8px;border-radius:4px} .s-b .range-display{color:var(--b);background:var(--b-dd)} /* RUN BUTTON */ .run-wrap{text-align:center;margin-bottom:32px} .run-btn{background:linear-gradient(135deg,var(--a),#38b2ac);border:none;border-radius:8px;padding:15px 48px;font-family:'Cabinet Grotesk',sans-serif;font-size:14px;font-weight:700;color:var(--bg);cursor:pointer;letter-spacing:.03em;transition:all .2s;box-shadow:0 4px 20px rgba(79,209,197,.2)} .run-btn:hover{transform:translateY(-2px);box-shadow:0 8px 32px rgba(79,209,197,.3)} /* RESULTS */ #results{display:none} /* WINNER BANNER */ .winner-banner{border-radius:10px;padding:20px 24px;margin-bottom:20px;display:flex;align-items:center;gap:16px} .wb-a{background:linear-gradient(135deg,var(--a-d),transparent);border:1px solid rgba(79,209,197,.3)} .wb-b{background:linear-gradient(135deg,var(--b-d),transparent);border:1px solid rgba(246,173,85,.3)} .wb-tie{background:linear-gradient(135deg,rgba(255,255,255,.05),transparent);border:1px solid var(--border)} .wb-label{font-size:10px;letter-spacing:.2em;text-transform:uppercase;color:var(--muted);margin-bottom:4px} .wb-value{font-size:1.6rem;font-weight:800} .wb-a .wb-value{color:var(--a)} .wb-b .wb-value{color:var(--b)} .wb-desc{font-size:12px;color:var(--muted);line-height:1.6} .wb-advantage{margin-left:auto;text-align:right} .wb-adv-label{font-size:9px;letter-spacing:.15em;text-transform:uppercase;color:var(--muted);margin-bottom:4px} .wb-adv-val{font-size:1.2rem;font-weight:700;color:var(--green)} /* COMPARISON TABLE */ .comp-table-wrap{background:var(--card);border:1px solid var(--border);border-radius:10px;overflow:hidden;margin-bottom:20px} .comp-table-head{display:grid;grid-template-columns:1.5fr 1fr 1fr 80px;padding:12px 18px;background:rgba(79,209,197,.06);border-bottom:1px solid var(--border);font-size:9px;letter-spacing:.2em;text-transform:uppercase;color:var(--muted)} .comp-table-head .col-a{color:var(--a)} .comp-table-head .col-b{color:var(--b)} .comp-row{display:grid;grid-template-columns:1.5fr 1fr 1fr 80px;padding:11px 18px;border-bottom:1px solid var(--border2);align-items:center;font-size:12px} .comp-row:last-child{border-bottom:none} .comp-row:hover{background:rgba(79,209,197,.02)} .comp-metric{color:var(--muted)} .comp-val-a{font-family:'Fira Code',monospace;color:var(--a)} .comp-val-b{font-family:'Fira Code',monospace;color:var(--b)} .comp-winner{text-align:center} .win-badge{display:inline-block;width:22px;height:22px;border-radius:50%;font-size:9px;font-weight:700;display:flex;align-items:center;justify-content:center} .win-a{background:var(--a-d);color:var(--a)}.win-b{background:var(--b-d);color:var(--b)}.win-tie{background:var(--muted2);color:var(--muted)} /* CHART AREA */ .chart-grid{display:grid;grid-template-columns:2fr 1fr;gap:16px;margin-bottom:20px} .chart-box{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:20px} .chart-title{font-size:12px;font-weight:700;margin-bottom:4px} .chart-sub{font-size:10px;color:var(--muted);margin-bottom:16px} .chart-svg{width:100%;overflow:visible} /* TIMELINE CHART */ .tl-chart{height:180px;position:relative} .tl-year-labels{display:flex;justify-content:space-between;font-size:9px;color:var(--muted);margin-top:6px} /* BAR COMPARISON */ .bar-comp{display:flex;flex-direction:column;gap:10px;margin-top:8px} .bc-row{display:flex;flex-direction:column;gap:4px} .bc-label{font-size:9px;color:var(--muted);letter-spacing:.1em;text-transform:uppercase} .bc-bars{display:flex;gap:4px;align-items:center} .bc-bar-a,.bc-bar-b{height:18px;border-radius:3px;transition:width .8s cubic-bezier(.16,1,.3,1);min-width:4px;display:flex;align-items:center;padding-left:6px;font-size:9px;font-weight:700;overflow:hidden;white-space:nowrap} .bc-bar-a{background:var(--a-d);color:var(--a);border:1px solid rgba(79,209,197,.3)} .bc-bar-b{background:var(--b-d);color:var(--b);border:1px solid rgba(246,173,85,.3)} /* ASSUMPTIONS */ .assumptions{background:var(--card2);border:1px solid var(--border2);border-radius:8px;padding:14px 16px;font-size:10px;color:var(--muted);line-height:1.8;margin-bottom:16px} @media(max-width:768px){ .scenarios,.chart-grid{grid-template-columns:1fr} .comp-wrap{padding:0 16px 60px} .hero{padding:40px 20px 28px} } </style> </head> <body>
<script>
(async function(){
  try {
    const res = await fetch('/api/auth/me', { credentials: 'include' });
    if (!res.ok) throw new Error('unauthenticated');
    const { user } = await res.json();
    if (!user.is_admin && user.subscription_status !== 'premium') throw new Error('not-premium');
    localStorage.setItem('ia_user', JSON.stringify(user));
  } catch(e) {
    const dest = encodeURIComponent(window.location.pathname.split('/').pop());
    window.location.href = e.message === 'not-premium'
      ? 'index.html#pricing'
      : 'premium-login.html?redirect=' + dest;
  }
})();
</script>
<div id="ia-premium-bar" style="position:fixed;bottom:0;left:0;right:0;z-index:9999;background:rgba(27,58,92,0.97);backdrop-filter:blur(12px);border-top:1px solid rgba(212,168,67,0.2);padding:0.55rem 1.5rem;display:flex;align-items:center;justify-content:space-between;font-family:Inter,sans-serif;font-size:0.78rem;">
  <span style="color:rgba(255,255,255,0.55);">&#9733; <span id="ia-member-name" style="color:#D4A843;"></span> &mdash; Premium Member</span>
  <div style="display:flex;gap:1rem;align-items:center;">
    <a href="premium-hub.html" style="color:rgba(255,255,255,0.65);text-decoration:none;transition:color 0.2s;" onmouseover="this.style.color='#D4A843'" onmouseout="this.style.color='rgba(255,255,255,0.65)'">&#8617; Hub</a>
    <a href="financial-calculators.html" style="color:rgba(255,255,255,0.65);text-decoration:none;transition:color 0.2s;" onmouseover="this.style.color='#D4A843'" onmouseout="this.style.color='rgba(255,255,255,0.65)'">Calculators</a>
    <a href="index.html" style="color:rgba(255,255,255,0.65);text-decoration:none;transition:color 0.2s;" onmouseover="this.style.color='#D4A843'" onmouseout="this.style.color='rgba(255,255,255,0.65)'">Home</a>
    <a href="my-account.html" style="color:rgba(255,255,255,0.65);text-decoration:none;transition:color 0.2s;" onmouseover="this.style.color='#D4A843'" onmouseout="this.style.color='rgba(255,255,255,0.65)'">My Account</a><button onclick="(async()=>{await fetch('/api/auth/logout',{method:'POST',credentials:'include'});localStorage.removeItem('ia_token');localStorage.removeItem('ia_user');window.location.href='premium-login.html';})()" style="background:rgba(212,168,67,0.15);border:1px solid rgba(212,168,67,0.3);color:#D4A843;border-radius:6px;padding:0.3rem 0.9rem;cursor:pointer;font-size:0.75rem;font-family:Inter,sans-serif;transition:background 0.2s;" onmouseover="this.style.background='rgba(212,168,67,0.3)'" onmouseout="this.style.background='rgba(212,168,67,0.15)'">Sign Out</button>
  </div>
</div>
<script>
document.getElementById('ia-member-name').textContent=(JSON.parse(localStorage.getItem('ia_user')||'{}').name||'Member').split(' ')[0];
// Push body up so content isn't hidden behind the bar
document.addEventListener('DOMContentLoaded',function(){document.body.style.paddingBottom='44px';});
</script>
 <header> <a href="premium-hub.html" class="logo" style="text-decoration:none;"><img src="Logo-Premium-tr.png" alt="Funds Edge" style="height:48px;display:block;"></a> <div class="hd"></div> <div class="htitle">Scenario Comparison</div> </header> <div class="hero"> <div class="hero-chip">‚áÑ What-If Analysis</div> <h1 class="hero-title">Compare any two<br><span>financial scenarios</span></h1> <p class="hero-desc">Side-by-side analysis of any financial decision. See exactly what changes, what it costs, and what you gain over time.</p> </div> <!-- TEMPLATE PICKER --> <div class="templates" id="templates"> <div class="tpl active" onclick="loadTemplate('retirement')"><span class="tpl-icon">üèñ</span>Retire at 60 vs 65</div> <div class="tpl" onclick="loadTemplate('invest')"><span class="tpl-icon">üìà</span>$500 vs $1,000/mo</div> <div class="tpl" onclick="loadTemplate('debt')"><span class="tpl-icon">üí≥</span>Debt Payoff Speed</div> <div class="tpl" onclick="loadTemplate('house')"><span class="tpl-icon">üè†</span>Buy now vs 2 years</div> <div class="tpl" onclick="loadTemplate('salary')"><span class="tpl-icon">üíº</span>Job A vs Job B</div> <div class="tpl" onclick="loadTemplate('savings')"><span class="tpl-icon">üí∞</span>HYSA vs I-Bonds</div> <div class="tpl" onclick="loadTemplate('custom')"><span class="tpl-icon">‚öôÔ∏è</span>Custom Comparison</div> </div> <div class="comp-wrap"> <!-- INPUTS --> <div class="scenarios"> <div class="scenario-col s-a"> <div class="scenario-header"> <div class="scenario-dot"></div> <div> <div class="scenario-label">Scenario A</div> <div class="scenario-name" id="title-a">Retire at Age 60</div> </div> </div> <div class="scenario-body" id="inputs-a"></div> </div> <div class="scenario-col s-b"> <div class="scenario-header"> <div class="scenario-dot"></div> <div> <div class="scenario-label">Scenario B</div> <div class="scenario-name" id="title-b">Retire at Age 65</div> </div> </div> <div class="scenario-body" id="inputs-b"></div> </div> </div> <div class="run-wrap"> <button class="run-btn" onclick="runComparison()">‚áÑ Run Comparison</button> </div> <!-- RESULTS --> <div id="results"> <div id="winner-banner"></div> <div class="comp-table-wrap"> <div class="comp-table-head"> <div>Metric</div> <div class="col-a" id="col-a-head">Scenario A</div> <div class="col-b" id="col-b-head">Scenario B</div> <div style="text-align:center">Better</div> </div> <div id="comp-rows"></div> </div> <div class="chart-grid"> <div class="chart-box"> <div class="chart-title">Growth Over Time</div> <div class="chart-sub">Portfolio / wealth projection ‚Äî both scenarios</div> <div class="tl-chart"> <svg class="chart-svg" id="timeline-svg" height="180" viewBox="0 0 600 180" preserveAspectRatio="none"></svg> </div> <div class="tl-year-labels" id="year-labels"></div> </div> <div class="chart-box"> <div class="chart-title">Key Metrics Comparison</div> <div class="chart-sub">Side-by-side bar chart</div> <div class="bar-comp" id="bar-comp"></div> </div> </div> <div class="assumptions" id="assumptions"></div> </div> </div> <script> const TEMPLATES={ retirement:{ titleA:'Retire at Age 60',titleB:'Retire at Age 65', fields:[ {id:'age',label:'Current Age',type:'number',default:[35,35]}, {id:'savings',label:'Current Savings',type:'dollar',default:[180000,180000]}, {id:'monthly',label:'Monthly Investment',type:'dollar',default:[2500,2500]}, {id:'return',label:'Expected Return',type:'pct',default:[7,7]}, {id:'expenses',label:'Annual Retirement Expenses',type:'dollar',default:[60000,60000]}, {id:'ss',label:'Social Security (monthly)',type:'dollar',default:[1400,2200]}, ], calc:(a,b)=>{ const yrsA=a.retire||60-a.age,yrsB=b.retire||65-b.age; const rA=a.return/100/12,rB=b.return/100/12; const fvA=a.savings*Math.pow(1+rA,yrsA*12)+a.monthly*(Math.pow(1+rA,yrsA*12)-1)/rA; const fvB=b.savings*Math.pow(1+rB,yrsB*12)+b.monthly*(Math.pow(1+rB,yrsB*12)-1)/rB; const needA=Math.max(0,(a.expenses-a.ss*12))*25; const needB=Math.max(0,(b.expenses-b.ss*12))*25; const surplusA=fvA-needA,surplusB=fvB-needB; return{ rows:[ {label:'Nest Egg at Retirement',a:fmt(fvA),b:fmt(fvB),winner:fvA>fvB?'A':fvA<fvB?'B':'tie'}, {label:'FIRE Number Needed',a:fmt(needA),b:fmt(needB),winner:needA<needB?'A':needA>needB?'B':'tie'}, {label:'Surplus / (Gap)',a:fmt(surplusA),b:fmt(surplusB),winner:surplusA>surplusB?'A':surplusA<surplusB?'B':'tie'}, {label:'Monthly SS Income',a:'$'+(a.ss||0).toLocaleString(),b:'$'+(b.ss||0).toLocaleString(),winner:(a.ss||0)>(b.ss||0)?'A':(a.ss||0)<(b.ss||0)?'B':'tie'}, {label:'Years of Extra Investing',a:yrsA+' years',b:yrsB+' years',winner:yrsB>yrsA?'B':'A'}, ], winnerSide:surplusA>surplusB?'A':surplusA<surplusB?'B':'tie', winnerDesc:`Retiring at ${fvA>fvB?60:65} builds a larger nest egg due to ${fvA>fvB?'lower FIRE number needed':'5 extra years of contributions and compounding'}.`, advantage:fmt(Math.abs(surplusA-surplusB)), advLabel:'Surplus Difference', seriesA:genSeries(a.savings,a.monthly,a.return/100,Math.max(yrsA,yrsB)), seriesB:genSeries(b.savings,b.monthly,b.return/100,Math.max(yrsA,yrsB)), bars:[ {label:'Nest Egg',a:fvA,b:fvB},{label:'FIRE Target',a:needA,b:needB}, ], assumptions:`Assumptions: ${a.return}% annual return, inflation not modeled. Social Security estimated. FIRE number = 25√ó annual expenses minus SS income (4% rule). Comparison period: ${Math.max(yrsA,yrsB)} years.`, }; } }, invest:{ titleA:'Invest $500/month',titleB:'Invest $1,000/month', fields:[ {id:'initial',label:'Starting Balance',type:'dollar',default:[10000,10000]}, {id:'monthly',label:'Monthly Contribution',type:'dollar',default:[500,1000]}, {id:'return',label:'Annual Return',type:'pct',default:[7,7]}, {id:'years',label:'Investment Period',type:'range',default:[20,20],min:5,max:40}, {id:'inflation',label:'Inflation Rate',type:'pct',default:[3,3]}, ], calc:(a,b)=>{ const yrs=a.years||20; const rA=a.return/100/12,rB=b.return/100/12; const fvA=a.initial*Math.pow(1+rA,yrs*12)+a.monthly*(Math.pow(1+rA,yrs*12)-1)/rA; const fvB=b.initial*Math.pow(1+rB,yrs*12)+b.monthly*(Math.pow(1+rB,yrs*12)-1)/rB; const totalA=a.initial+a.monthly*yrs*12,totalB=b.initial+b.monthly*yrs*12; const growthA=fvA-totalA,growthB=fvB-totalB; return{ rows:[ {label:'Portfolio Value',a:fmt(fvA),b:fmt(fvB),winner:fvA>fvB?'A':'B'}, {label:'Total Invested',a:fmt(totalA),b:fmt(totalB),winner:totalA<totalB?'A':'B'}, {label:'Investment Growth',a:fmt(growthA),b:fmt(growthB),winner:growthA>growthB?'A':'B'}, {label:'Monthly Difference',a:'‚Äî',b:'$'+(b.monthly-a.monthly).toLocaleString()+' more',winner:'tie'}, {label:'ROI',a:((fvA/totalA-1)*100).toFixed(1)+'%',b:((fvB/totalB-1)*100).toFixed(1)+'%',winner:fvA/totalA>fvB/totalB?'A':'B'}, ], winnerSide:'B',winnerDesc:'Doubling your monthly contribution nearly doubles your final portfolio value thanks to compound growth.', advantage:fmt(fvB-fvA),advLabel:'Additional Wealth', seriesA:genSeries(a.initial,a.monthly,a.return/100,yrs), seriesB:genSeries(b.initial,b.monthly,b.return/100,yrs), bars:[{label:'Final Portfolio',a:fvA,b:fvB},{label:'Total Invested',a:totalA,b:totalB},{label:'Gain from Growth',a:growthA,b:growthB}], assumptions:`Assumptions: ${a.return}% annual return, monthly compounding, ${yrs}-year period. Inflation not applied to nominal values shown.`, }; } }, debt:{ titleA:'Minimum Payments',titleB:'Aggressive Payoff (+$500/mo)', fields:[ {id:'balance',label:'Total Debt Balance',type:'dollar',default:[25000,25000]}, {id:'rate',label:'Interest Rate (APR)',type:'pct',default:[18,18]}, {id:'min_payment',label:'Minimum Monthly Payment',type:'dollar',default:[500,1000]}, ], calc:(a,b)=>{ function debtYears(bal,rate,pmt){let b=bal,m=0;while(b>0&&m<600){b=b*(1+rate/12/100)-pmt;m++;}return{months:m,totalPaid:pmt*m,interest:pmt*m-bal}} const rA=debtYears(a.balance,a.rate,a.min_payment); const rB=debtYears(b.balance,b.rate,b.min_payment); return{ rows:[ {label:'Payoff Time',a:fmtMo(rA.months),b:fmtMo(rB.months),winner:rA.months<rB.months?'A':'B'}, {label:'Total Interest Paid',a:fmt(rA.interest),b:fmt(rB.interest),winner:rA.interest<rB.interest?'A':'B'}, {label:'Total Paid',a:fmt(rA.totalPaid),b:fmt(rB.totalPaid),winner:rA.totalPaid<rB.totalPaid?'A':'B'}, {label:'Interest Saved vs Min',a:'‚Äî',b:fmt(rA.interest-rB.interest),winner:'B'}, {label:'Months Saved',a:'‚Äî',b:(rA.months-rB.months)+' months',winner:'B'}, ], winnerSide:'B',winnerDesc:`Paying ${fmt(b.min_payment-a.min_payment)} more per month saves ${fmt(rA.interest-rB.interest)} in interest and gets you debt-free ${fmtMo(rA.months-rB.months)} sooner.`, advantage:fmt(rA.interest-rB.interest),advLabel:'Interest Saved', seriesA:genDebtSeries(a.balance,a.rate,a.min_payment,Math.ceil(rA.months/12)+1), seriesB:genDebtSeries(b.balance,b.rate,b.min_payment,Math.ceil(rA.months/12)+1), bars:[{label:'Total Interest',a:rA.interest,b:rB.interest},{label:'Total Paid',a:rA.totalPaid,b:rB.totalPaid}], assumptions:`Scenario A: minimum ${fmt(a.min_payment)}/month. Scenario B: accelerated ${fmt(b.min_payment)}/month. APR: ${a.rate}%. No additional charges assumed.`, }; } }, house:{titleA:'Buy Now',titleB:'Wait 2 Years',fields:[{id:'price',label:'Home Price',type:'dollar',default:[420000,440000]},{id:'down',label:'Down Payment %',type:'pct',default:[10,20]},{id:'rate',label:'Mortgage Rate',type:'pct',default:[7.25,6.0]},{id:'appreciation',label:'Annual Appreciation',type:'pct',default:[4,4]},{id:'rent',label:'Monthly Rent (if waiting)',type:'dollar',default:[2000,2000]}],calc:(a,b)=>{const loanA=(a.price||420000)*(1-a.down/100),loanB=(b.price||440000)*(1-b.down/100);const pmtA=pmtCalc(a.rate/100/12,360,loanA),pmtB=pmtCalc(b.rate/100/12,360,loanB);const fvA=(a.price||420000)*Math.pow(1+a.appreciation/100,10),fvB=(b.price||440000)*Math.pow(1+b.appreciation/100,8);const rentPaid=a.rent*24;return{rows:[{label:'Loan Amount',a:fmt(loanA),b:fmt(loanB),winner:loanA<loanB?'A':'B'},{label:'Monthly Payment (P&I)',a:fmt(pmtA),b:fmt(pmtB),winner:pmtA<pmtB?'A':'B'},{label:'Home Value in 10 Years',a:fmt(fvA),b:fmt(fvB),winner:fvA>fvB?'A':'B'},{label:'Rent Paid While Waiting',a:'‚Äî',b:fmt(rentPaid),winner:'A'},{label:'Total Interest (30yr)',a:fmt(pmtA*360-loanA),b:fmt(pmtB*360-loanB),winner:(pmtA*360-loanA)<(pmtB*360-loanB)?'A':'B'}],winnerSide:fvA-pmtA*360>fvB-pmtB*360-rentPaid?'A':'B',winnerDesc:'Depends on how home prices change during the waiting period vs. rent cost and rate improvements.',advantage:fmt(Math.abs(pmtA-pmtB)*360),advLabel:'30yr Payment Difference',seriesA:genAppSeries(a.price||420000,a.appreciation/100,10),seriesB:genAppSeries(b.price||440000,b.appreciation/100,10,2),bars:[{label:'10yr Home Value',a:fvA,b:fvB},{label:'Monthly Payment',a:pmtA,b:pmtB}],assumptions:`Buy Now: ${fmt(a.price)} at ${a.rate}% with ${a.down}% down. Wait 2 Years: ${fmt(b.price)} at ${b.rate}% with ${b.down}% down + ${fmt(rentPaid)} rent paid.`};}}, salary:{titleA:'Job A: Higher Salary',titleB:'Job B: Better Benefits',fields:[{id:'salary',label:'Annual Salary',type:'dollar',default:[110000,95000]},{id:'bonus',label:'Annual Bonus',type:'dollar',default:[0,5000]},{id:'match',label:'401k Match (%)',type:'pct',default:[3,6]},{id:'equity',label:'Annual Equity / RSUs',type:'dollar',default:[0,15000]},{id:'years',label:'Years at Company',type:'range',default:[5,5],min:1,max:20}],calc:(a,b)=>{const yrs=a.years||5;let totalA=0,totalB=0;for(let y=1;y<=yrs;y++){totalA+=(a.salary+a.bonus+a.salary*a.match/100+a.equity)*Math.pow(1.03,y-1);totalB+=(b.salary+b.bonus+b.salary*b.match/100+b.equity)*Math.pow(1.03,y-1);}const annA=a.salary+a.bonus+a.salary*a.match/100+a.equity;const annB=b.salary+b.bonus+b.salary*b.match/100+b.equity;return{rows:[{label:'Base Salary',a:fmt(a.salary),b:fmt(b.salary),winner:a.salary>b.salary?'A':'B'},{label:'Total Comp (annual)',a:fmt(annA),b:fmt(annB),winner:annA>annB?'A':'B'},{label:'401k Match Value',a:fmt(a.salary*a.match/100),b:fmt(b.salary*b.match/100),winner:a.salary*a.match/100>b.salary*b.match/100?'A':'B'},{label:`${yrs}-Year Total Comp`,a:fmt(totalA),b:fmt(totalB),winner:totalA>totalB?'A':'B'}],winnerSide:totalA>totalB?'A':'B',winnerDesc:`Job ${totalA>totalB?'A':'B'} pays more over ${yrs} years in total compensation including equity and benefits.`,advantage:fmt(Math.abs(totalA-totalB)),advLabel:`${yrs}-Year Advantage`,seriesA:Array.from({length:yrs},(_, i)=>annA*Math.pow(1.03,i)).reduce((acc,v,i)=>{acc.push((acc[i-1]||0)+v);return acc;},[]),seriesB:Array.from({length:yrs},(_, i)=>annB*Math.pow(1.03,i)).reduce((acc,v,i)=>{acc.push((acc[i-1]||0)+v);return acc;},[]),bars:[{label:'Annual Total Comp',a:annA,b:annB},{label:`${yrs}yr Cumulative`,a:totalA,b:totalB}],assumptions:`Total comp = salary + bonus + 401k match value + equity/RSUs, growing at 3% annually. Tax not applied.`};}}, savings:{titleA:'High-Yield Savings (HYSA)',titleB:'I-Bonds',fields:[{id:'amount',label:'Initial Deposit',type:'dollar',default:[20000,20000]},{id:'monthly',label:'Monthly Addition',type:'dollar',default:[500,500]},{id:'hysa_rate',label:'HYSA APY',type:'pct',default:[4.8,0]},{id:'ibond_rate',label:'I-Bond Rate (annualized)',type:'pct',default:[0,5.27]},{id:'years',label:'Holding Period',type:'range',default:[5,5],min:1,max:10}],calc:(a,b)=>{const yrs=a.years||5;const rA=a.hysa_rate||4.8,rB=b.ibond_rate||5.27;const fvA=a.amount*Math.pow(1+rA/100,yrs)+a.monthly*12*(Math.pow(1+rA/100,yrs)-1)/(rA/100);const fvB=a.amount*Math.pow(1+rB/100,yrs);// I-bonds limited, simplified return{rows:[{label:`Value After ${yrs} Years`,a:fmt(fvA),b:fmt(fvB),winner:fvA>fvB?'A':'B'},{label:'Interest Earned',a:fmt(fvA-(a.amount+a.monthly*12*yrs)),b:fmt(fvB-a.amount),winner:(fvA-(a.amount+a.monthly*12*yrs))>(fvB-a.amount)?'A':'B'},{label:'Liquidity',a:'‚úì Fully liquid',b:'12-mo lock-in',winner:'A'},{label:'Inflation Protection',a:'Partial',b:'‚úì CPI-indexed',winner:'B'},{label:'Annual Contribution Limit',a:'Unlimited',b:'$10,000/yr',winner:'A'}],winnerSide:fvA>fvB?'A':'B',winnerDesc:`HYSA allows unlimited contributions and full liquidity. I-Bonds offer inflation protection but are capped at $10,000/year per person and locked for 12 months.`,advantage:fmt(Math.abs(fvA-fvB)),advLabel:`${yrs}-yr Value Difference`,seriesA:genSeries(a.amount,a.monthly,rA/100,yrs),seriesB:genSeries(a.amount,0,rB/100,yrs),bars:[{label:`${yrs}yr Value`,a:fvA,b:fvB},{label:'Interest Earned',a:fvA-(a.amount+a.monthly*12*yrs),b:fvB-a.amount}],assumptions:`HYSA: ${rA}% APY, compounded annually, ongoing ${fmt(a.monthly)}/mo contributions. I-Bonds: ${rB}% annualized, $10K cap, no ongoing contributions modeled. Taxes not applied.`};}}, custom:{titleA:'Scenario A',titleB:'Scenario B',fields:[{id:'start',label:'Starting Value',type:'dollar',default:[0,0]},{id:'monthly',label:'Monthly Addition',type:'dollar',default:[1000,1000]},{id:'return',label:'Annual Return / Rate',type:'pct',default:[7,7]},{id:'years',label:'Years',type:'range',default:[10,10],min:1,max:40}],calc:(a,b)=>{const yrs=a.years||10;const rA=a.return/100/12,rB=b.return/100/12;const fvA=a.start*Math.pow(1+rA,yrs*12)+a.monthly*(Math.pow(1+rA,yrs*12)-1)/rA;const fvB=b.start*Math.pow(1+rB,yrs*12)+b.monthly*(Math.pow(1+rB,yrs*12)-1)/rB;return{rows:[{label:'Final Value',a:fmt(fvA),b:fmt(fvB),winner:fvA>fvB?'A':'B'},{label:'Total Contributed',a:fmt(a.start+a.monthly*yrs*12),b:fmt(b.start+b.monthly*yrs*12),winner:(a.start+a.monthly*yrs*12)<(b.start+b.monthly*yrs*12)?'A':'B'}],winnerSide:fvA>fvB?'A':'B',winnerDesc:'Custom comparison.',advantage:fmt(Math.abs(fvA-fvB)),advLabel:'Difference',seriesA:genSeries(a.start,a.monthly,a.return/100,yrs),seriesB:genSeries(b.start,b.monthly,b.return/100,yrs),bars:[{label:'Final Value',a:fvA,b:fvB}],assumptions:`${a.return}% vs ${b.return}% annual return over ${yrs} years.`};}}, }; let currentTpl='retirement'; function fmt(n){return'$'+Math.abs(Math.round(n)).toLocaleString()} function fmtMo(m){const y=Math.floor(m/12),mo=m%12;return y>0?`${y}y ${mo}m`:`${mo}m`} function pmtCalc(r,n,pv){if(!r)return pv/n;return pv*(r*Math.pow(1+r,n))/(Math.pow(1+r,n)-1)} function genSeries(init,monthly,ret,years){const s=[];let v=init;for(let y=0;y<years;y++){for(let m=0;m<12;m++){v=v*(1+ret/12)+monthly;}s.push(v);}return s} function genDebtSeries(bal,rate,pmt,years){const s=[];let b=bal;for(let y=0;y<years;y++){for(let m=0;m<12;m++){b=Math.max(0,b*(1+rate/1200)-pmt);}s.push(b);}return s} function genAppSeries(price,appRate,years,offset=0){const s=[];for(let y=1;y<=years;y++)s.push(y<offset?null:price*Math.pow(1+appRate,y));return s} function loadTemplate(tpl){ currentTpl=tpl; document.querySelectorAll('.tpl').forEach(t=>t.classList.toggle('active',t.textContent.trim().toLowerCase().replace(/ /g,'_')===tpl||(t.onclick&&t.onclick.toString().includes(tpl)))); const T=TEMPLATES[tpl]; document.getElementById('title-a').textContent=T.titleA; document.getElementById('title-b').textContent=T.titleB; document.getElementById('col-a-head').textContent=T.titleA; document.getElementById('col-b-head').textContent=T.titleB; renderInputs('inputs-a',T.fields,0,'a'); renderInputs('inputs-b',T.fields,1,'b'); document.getElementById('results').style.display='none'; } function renderInputs(containerId,fields,valIdx,side){ document.getElementById(containerId).innerHTML=fields.map(f=>{ const val=f.default[valIdx]; if(f.type==='range')return`<div class="field-group"><label class="fl">${f.label}</label><div class="range-row"><input type="range" id="${side}_${f.id}" min="${f.min}" max="${f.max}" value="${val}" oninput="syncR('${side}_${f.id}_num','${side}_${f.id}')" style="--pct:${(val-f.min)/(f.max-f.min)*100}%"><div class="range-display" id="${side}_${f.id}_num">${val} yrs</div></div></div>`; if(f.type==='dollar')return`<div class="field-group"><label class="fl">${f.label}</label><div class="fi-wrap"><span class="pfx">$</span><input class="fi hp" type="number" id="${side}_${f.id}" value="${val}"></div></div>`; if(f.type==='pct')return`<div class="field-group"><label class="fl">${f.label}</label><div class="fi-wrap"><input class="fi hs" type="number" id="${side}_${f.id}" value="${val}" step="0.1"><span class="sfx">%</span></div></div>`; return`<div class="field-group"><label class="fl">${f.label}</label><input class="fi" type="number" id="${side}_${f.id}" value="${val}"></div>`; }).join(''); } function syncR(numId,rangeId){ const rng=document.getElementById(rangeId); document.getElementById(numId).textContent=rng.value+' yrs'; const min=+rng.min,max=+rng.max,v=+rng.value; rng.style.setProperty('--pct',((v-min)/(max-min)*100)+'%'); } function getVals(side,fields){ const out={}; fields.forEach(f=>{ const el=document.getElementById(side+'_'+f.id); out[f.id]=el?parseFloat(el.value)||0:f.default[side==='a'?0:1]; }); return out; } function runComparison(){ const T=TEMPLATES[currentTpl]; const a=getVals('a',T.fields),b=getVals('b',T.fields); const res=T.calc(a,b); // Winner banner const wColor=res.winnerSide==='A'?'var(--a)':'var(--b)'; const wLabel=res.winnerSide==='A'?T.titleA:T.titleB; document.getElementById('winner-banner').innerHTML=` <div class="winner-banner wb-${res.winnerSide.toLowerCase()}"> <div> <div class="wb-label">Recommended Scenario</div> <div class="wb-value">${wLabel}</div> <div class="wb-desc">${res.winnerDesc}</div> </div> <div class="wb-advantage"> <div class="wb-adv-label">${res.advLabel}</div> <div class="wb-adv-val">${res.advantage}</div> </div> </div>`; // Rows document.getElementById('comp-rows').innerHTML=res.rows.map(r=>` <div class="comp-row"> <div class="comp-metric">${r.label}</div> <div class="comp-val-a">${r.a}</div> <div class="comp-val-b">${r.b}</div> <div class="comp-winner"><div class="win-badge win-${r.winner.toLowerCase()}">${r.winner==='tie'?'=':r.winner}</div></div> </div>`).join(''); // Timeline chart drawTimeline(res.seriesA,res.seriesB); // Bar chart const maxBar=Math.max(...res.bars.flatMap(b=>[b.a,b.b])); document.getElementById('bar-comp').innerHTML=res.bars.map(br=>` <div class="bc-row"> <div class="bc-label">${br.label}</div> <div class="bc-bars"> <div class="bc-bar-a" style="width:${br.a/maxBar*100}%">${br.a>maxBar*.15?fmt(br.a):''}</div> </div> <div class="bc-bars"> <div class="bc-bar-b" style="width:${br.b/maxBar*100}%">${br.b>maxBar*.15?fmt(br.b):''}</div> </div> </div>`).join(''); document.getElementById('assumptions').innerHTML='‚ÑπÔ∏è '+res.assumptions; document.getElementById('results').style.display='block'; document.getElementById('results').scrollIntoView({behavior:'smooth',block:'start'}); } function drawTimeline(serA,serB){ const allVals=[...serA.filter(v=>v!=null),...serB.filter(v=>v!=null)]; const mx=Math.max(...allVals),mn=Math.min(0,...allVals); const W=600,H=180,yrs=Math.max(serA.length,serB.length); function px(i){return(i/(yrs-1))*W} function py(v){if(v==null)return null;return H-(((v-mn)/(mx-mn))*H*0.85+H*.05)} const pathA=serA.map((v,i)=>v!=null?`${i===0||serA[i-1]==null?'M':'L'}${px(i)},${py(v)}`:'').join(' '); const pathB=serB.map((v,i)=>v!=null?`${i===0||serB[i-1]==null?'M':'L'}L${px(i)},${py(v)}`:'').filter(Boolean).join(' ').replace('LL','L').replace(/^L/,'M'); const areaA=`M ${px(0)},${H} L ${serA.map((v,i)=>v!=null?`${px(i)},${py(v)}`:null).filter(Boolean).join(' L ')} L ${px(serA.length-1)},${H} Z`; document.getElementById('timeline-svg').innerHTML=` <defs> <linearGradient id="gradA" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="var(--a)" stop-opacity=".2"/><stop offset="100%" stop-color="var(--a)" stop-opacity="0"/></linearGradient> <linearGradient id="gradB" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="var(--b)" stop-opacity=".15"/><stop offset="100%" stop-color="var(--b)" stop-opacity="0"/></linearGradient> </defs> <path d="${areaA}" fill="url(#gradA)"/> <path d="${pathA}" fill="none" stroke="var(--a)" stroke-width="2"/> <path d="${pathB}" fill="none" stroke="var(--b)" stroke-width="2" stroke-dasharray="6 3"/> <circle cx="${px(serA.length-1)}" cy="${py(serA[serA.length-1])}" r="4" fill="var(--a)"/> <circle cx="${px(serB.length-1)}" cy="${py(serB[serB.length-1])}" r="4" fill="var(--b)"/>`; const labels=Array.from({length:6},(_,i)=>Math.round((i/(5))*(yrs))); document.getElementById('year-labels').innerHTML=labels.map(y=>`<span>Yr ${y}</span>`).join(''); } // Init loadTemplate('retirement'); document.querySelectorAll('.tpl')[0].classList.add('active'); </script> <script src="/tracker.js"></script>
</body> </html>